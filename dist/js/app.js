function initMap(){var e={lat:47.610984,lng:-122.337031};map=new google.maps.Map(document.getElementById("mapContainer"),{zoom:13,center:e}),infoWindow=new google.maps.InfoWindow,createMarkers()}function createMarkers(){museums.forEach(function(e){var n=new google.maps.Marker({position:{lat:e.lat,lng:e.lng},map:map,title:e.name,animation:google.maps.Animation.DROP});n.addListener("click",function(){bounceMarker(n),showInfoWindow(n)}),markers.push(n)})}function showInfoWindow(e){var n="https://api.foursquare.com/v2/venues/search";n+="?"+$.param({client_id:myFoursquareKey.client_id,client_secret:myFoursquareKey.client_secret,v:"20170910",intent:"match",query:e.getTitle(),ll:e.getPosition().lat().toString()+","+e.getPosition().lng().toString()}),$.ajax({url:n,method:"GET"}).done(function(n){var t="";try{t+="<div><h6>"+e.title+"</h6>",n.response.venues[0].location.formattedAddress&&(t+="<p><b>Address: </b>"+n.response.venues[0].location.formattedAddress+"</p>"),n.response.venues[0].contact.formattedPhone&&(t+="<p><b>Phone: </b>"+n.response.venues[0].contact.formattedPhone+"</p>"),n.response.venues[0].url&&(t+='<p><b>URL: </b><a href="'+n.response.venues[0].url+'">',t+=n.response.venues[0].url+"</a></p>"),t+='<p>Info source: <a href="https://api.foursquare.com">Foursquare</a></p></div>'}catch(n){t="<h6>"+e.getTitle()+"</h6><p>Failed to get information of location from foursquare.com</p>"}infoWindow.setContent(t),infoWindow.open(map,e)}).fail(function(n){content="<h6>"+e.getTitle()+"</h6><p>Failed to get information of location from foursquare.com</p>",infoWindow.setContent(content),infoWindow.open(map,e)})}function bounceMarker(e){e.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){e.setAnimation(null)},1400)}$("#closeBtn").click(function(){$("#leftPanel").addClass("hide")}),$("#menuBtn").click(function(){$("#leftPanel").removeClass("hide")});var myFoursquareKey={client_id:"03RWDJQSNB2KCMEFBANXP05OBFIEGOSCXQS1EA2UPIVMKTKE",client_secret:"RFFC3DOC2HY2ABIFMR03WGWZR31J3E0IYTIM1JROUEVZHMKH"},museums=[{name:"Asian Art Museum",lat:47.630281,lng:-122.314244},{name:"Coast Guard Museum Northwest",lat:47.590632,lng:-122.33768},{name:"Dialysis Museum - Northwest Kidney Centers",lat:47.608244,lng:-122.320326},{name:"Frye Art Museum",lat:47.606933,lng:-122.324059},{name:"Museum of History & Industry",lat:47.627618,lng:-122.336559},{name:"Museum of Pop Clulture",lat:47.621468,lng:-122.348124},{name:"Northwest African American Museum",lat:47.589149,lng:-122.30194},{name:"Seattle Art Museum",lat:47.607309,lng:-122.338133},{name:"Seattle Children's Museum",lat:47.621394,lng:-122.350884},{name:"Seattle Metropolitan Police Museum",lat:47.599661,lng:-122.330597},{name:"Seattle Museum of the Mysteries",lat:47.595123,lng:-122.327058},{name:"Seattle Pinball Museum",lat:47.598029,lng:-122.324956}],markers=[],map,infoWindow,ViewModel=function(){self=this,this.displayedMuseums=ko.observableArray(museums.slice()),this.museumClicked=function(e){markers.forEach(function(n){n.title===e.name&&(bounceMarker(n),showInfoWindow(n))})},this.filterText=ko.observable(""),this.filterTextChanged=function(){var e=this.filterText().trim().toLowerCase();if(this.displayedMuseums.removeAll(),""===e){for(i=0;i<museums.length;i++)this.displayedMuseums.push(museums[i]);markers.forEach(function(e){e.setMap(map)})}else{for(i=0;i<museums.length;i++)museums[i].name.toLowerCase().includes(e)&&this.displayedMuseums.push(museums[i]);markers.forEach(function(n){n.title.toLowerCase().includes(e)?n.setMap(map):n.setMap(null)})}}};ko.applyBindings(new ViewModel);